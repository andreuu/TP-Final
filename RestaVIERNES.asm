#INCLUDE <P16F628A.INC>

__CONFIG 3F10 && _WDT_OFF

org 0x00
GOTO START

CBLOCK 0x20

N1_CENTENA
N1_DECENA
N1_UNIDAD
N2_CENTENA
N2_DECENA
N2_UNIDAD

ENDC

OP_CARRY_UNIDAD
	
	;CHEQUEA UNIDAD
	BSF		STATUS,C
	DECF	N1_DECENA,W;SE LE PIDE 1 A LA DECENA
	BTFSC	STATUS,C
	GOTO SEGUIR

	BSF		STATUS,C
	;SI LA DECENA NO TIENE, SE LE PIDE 1 A LA CENTENA PA LA DECENA
	DECF	N1_CENTENA
	BTFSS	STATUS,C
	CALL	OP_NEGATIVO_UNIDAD
	;TAMBIEN TIENE QUE CONSULTAR SI LA CENTENA TIENE... DESPUES LO HAGO
	MOVF	N1_DECENA,W
	ADDLW	.10
	MOVWF	N1_DECENA

	SEGUIR
	DECF	N1_DECENA,F
	;SI LE PUDIMOS PEDIR 1 A LA DECENA, SE SUMA 10 A LA UNIDAD
	MOVF	N1_UNIDAD,W
	ADDLW	.10
	MOVWF	N1_UNIDAD

	MOVF	N2_UNIDAD,W
	SUBWF	N1_UNIDAD,W

	
	RETURN

OP_CARRY_DECENA
	
	;CHEQUEA CENTENA
	BSF		STATUS,C
	DECF	N1_CENTENA,W;SE LE PIDE 1 A LA CENTENARIA CONCHA DE TUMADRE
	BTFSC	STATUS,C
	GOTO 	SEGUIR1

	CALL OP_NEGATIVO_DECENA	

	SEGUIR1
	DECF	N1_CENTENA,F
	;SI LE PUDIMOS PEDIR 1 A LA CEN, SE SUMA 10 A LA DECENA
	MOVF	N1_DECENA,W
	ADDLW	.10
	MOVWF	N1_DECENA

	MOVF	N2_DECENA,W
	SUBWF	N1_DECENA,W
	
	RETURN

OP_CARRY_CENTENA

	



	RETURN

OP_NEGATIVO_UNIDAD

	RETURN

OP_NEGATIVO_DECENA


	RETURN

START

	MOVLW	.1
	MOVWF	N1_UNIDAD
	MOVLW	.3
	MOVWF	N1_DECENA
	MOVLW	.9
	MOVWF	N1_CENTENA

	MOVLW	.3
	MOVWF	N2_UNIDAD
	MOVLW	.5
	MOVWF	N2_DECENA
	MOVLW	.4
	MOVWF	N2_CENTENA

	MOVF	N2_UNIDAD,W
	SUBWF	N1_UNIDAD,W
	BTFSS	STATUS,C
	CALL	OP_CARRY_UNIDAD
	MOVWF	N1_UNIDAD

	MOVF	N2_DECENA,W
	SUBWF	N1_DECENA,W
	BTFSS	STATUS,C
	CALL 	OP_CARRY_DECENA
	MOVWF	N1_DECENA

	MOVF	N2_CENTENA,W
	SUBWF	N1_CENTENA,W
	BTFSS 	STATUS,C
	CALL	OP_CARRY_CENTENA
	MOVWF	N1_CENTENA
	
	GOTO $
	
	

END